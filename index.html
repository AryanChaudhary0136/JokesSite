<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Babita Ji üòú</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@500&family=Handlee&display=swap');

:root {
  --bg1: #ffecd2;
  --bg2: #fcb69f;
  --card-bg: #fff;
  --text: #333;
  --accent: #ff6a88;
  --accent-light: #f857a6;
}

body {
  font-family: 'Baloo 2', cursive;
  background: radial-gradient(circle at top, var(--bg1), var(--bg2));
  min-height: 100vh;
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow-x: hidden;
  transition: background 0.5s ease;
}

header {
  position: fixed;
  top: 10px;
  width: 90%;
  max-width: 500px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--text);
  z-index: 10;
}

header h2 {
  font-size: 1.3em;
  color: #fff;
  text-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.header-buttons button {
    background: none;
    border: none;
    font-size: 1.5em;
    cursor: pointer;
    color: #fff;
    margin-left: 10px;
}

#card {
  perspective: 1000px;
  width: 90%;
  max-width: 500px;
  height: 320px;
  margin-top: 90px;
}

.inner {
  width: 100%;
  height: 100%;
  position: relative;
  transition: transform 0.8s;
  transform-style: preserve-3d;
}

#card.flip .inner {
  transform: rotateY(180deg);
}

.face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  background: var(--card-bg);
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
  border-radius: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-evenly;
  text-align: center;
  padding: 20px;
  box-sizing: border-box;
  color: var(--text);
}

.back {
  transform: rotateY(180deg);
  justify-content: space-between;
}

#frontImage {
    max-width: 80%;
    height: 120px; 
    border-radius: 15px;
    object-fit: cover;
    margin: 5px 0;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
}


button {
  margin: 8px;
  padding: 10px 18px;
  border: none;
  border-radius: 20px;
  background: linear-gradient(45deg, var(--accent-light), #ff5858);
  color: #fff;
  font-size: 1em;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.3s;
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

#joke {
  font-size: 1.2em;
  line-height: 1.5;
  height: 190px;
  overflow-y: auto;
  padding: 0 15px;
  white-space: pre-wrap;
  opacity: 0;
  transition: opacity 0.5s ease-in-out;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) rgba(0,0,0,0.1);
  width:100%;
}
#joke.fade-in {
    opacity: 1;
}

#joke::-webkit-scrollbar { width: 8px; }
#joke::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 10px; }
#joke::-webkit-scrollbar-thumb { background-color: var(--accent); border-radius: 10px; }

.actions-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 0 20px;
    box-sizing: border-box;
}

.action-buttons button {
    background: none;
    font-size: 1.5em;
    padding: 5px;
    margin: 0 15px;
    color: var(--text);
    opacity: 0.7;
}

.action-buttons button:hover {
    opacity: 1;
    transform: scale(1.1);
    box-shadow: none;
}

#favoriteBtn.favorited {
    color: var(--accent);
}

#toast {
    position: fixed;
    bottom: 20px;
    background-color: #333;
    color: #fff;
    padding: 10px 20px;
    border-radius: 20px;
    font-size: 0.9em;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 100;
}
#toast.show {
    opacity: 1;
    visibility: visible;
}

footer {
  position: fixed;
  bottom: 8px;
  right: 10px;
  font-family: 'Handlee', cursive;
  font-size: 0.9em;
  color: rgba(255,255,255,0.8);
}

.dark {
  --bg1: #2b1055;
  --bg2: #7597de;
  --card-bg: #2e2e2e;
  --text: #f5f5f5;
}
</style>
</head>
<body>
<header>
  <h2>Babita Ji üòú</h2>
  <div class="header-buttons">
    <button id="showFavoritesBtn">‚ù§Ô∏è</button>
    <button id="modeToggle">üåô</button>
  </div>
</header>

<div id="card">
  <div class="inner">
    <div class="face front">
      <h3>Ready for a laugh?</h3>
      <!-- IMAGE LINK UPDATED TO YOUR LOCAL FILE -->
      <img id="frontImage" src="image.png" alt="Jethalal and Babita Ji">
      <button onclick="fetchNewJoke()">üé≤ Get a Random Joke</button>
    </div>
    <div class="face back">
      <div id="joke">Your joke will appear here üòÑ</div>
      
      <div class="actions-container">
        <div class="action-buttons">
          <button id="favoriteBtn" onclick="toggleFavorite()">‚ù§Ô∏è</button>
          <button onclick="copyJoke()">üìã</button>
        </div>
        <button onclick="flipBack()">üîÅ Go Back</button>
      </div>
    </div>
  </div>
</div>

<div id="toast">Copied!</div>
<footer>with ‚ù§Ô∏è by Aryan Chaudhary</footer>

<audio id="flipSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_68b6c7bfa2.mp3?filename=card-flip-1-108466.mp3"></audio>

<script>
const card = document.getElementById("card");
const jokeDiv = document.getElementById("joke");
const flipSound = document.getElementById("flipSound");
const toggleBtn = document.getElementById("modeToggle");
const favoriteBtn = document.getElementById("favoriteBtn");
const showFavoritesBtn = document.getElementById("showFavoritesBtn");
const toast = document.getElementById("toast");

let currentJoke = "";
let favoritesView = false;

const apis = [
    { url: 'https://v2.jokeapi.dev/joke/Any?type=single', format: 'jokeapi' },
    { url: 'https://official-joke-api.appspot.com/jokes/random', format: 'official' },
    { url: 'https://icanhazdadjoke.com/', format: 'dadjoke' },
    { url: 'https://v2.jokeapi.dev/joke/Programming?type=single', format: 'jokeapi' }
];

async function fetchNewJoke() {
    favoritesView = false;
    flipSound.play();
    card.classList.add("flip");
    jokeDiv.classList.remove('fade-in');
    jokeDiv.textContent = "Fetching a random joke...";

    const joke = await getRandomJokeFromApis();
    currentJoke = joke;

    setTimeout(() => {
        jokeDiv.textContent = currentJoke;
        jokeDiv.classList.add('fade-in');
        updateFavoriteStatus();
    }, 300);
}

function flipBack() {
    if (favoritesView) {
        fetchNewJoke(); 
    } else {
        card.classList.remove("flip");
    }
}

async function getRandomJokeFromApis() {
    const api = apis[Math.floor(Math.random() * apis.length)];
    try {
        const headers = api.format === 'dadjoke' ? { "Accept": "application/json" } : {};
        const res = await fetch(api.url, { headers });
        const data = await res.json();

        if (api.format === 'jokeapi') {
            return data.joke;
        } else if (api.format === 'official') {
            return `${data.setup}\n\n${data.delivery}`;
        } else if (api.format === 'dadjoke') {
            return data.joke;
        }
    } catch (e) {
        return "Oops! Couldn't fetch the joke. Check your internet connection.";
    }
}

function showToast(message) {
    toast.textContent = message;
    toast.classList.add("show");
    setTimeout(() => {
        toast.classList.remove("show");
    }, 2000);
}

function copyJoke() {
    if (currentJoke && !favoritesView) {
        navigator.clipboard.writeText(currentJoke);
        showToast("Copied to clipboard!");
    } else if (favoritesView) {
        showToast("Can't copy favorites list!");
    }
}

function getFavorites() {
    return JSON.parse(localStorage.getItem('favorite_jokes')) || [];
}

function toggleFavorite() {
    if (favoritesView || !currentJoke) {
        showToast("Can't favorite this view!");
        return;
    };

    let favorites = getFavorites();
    const isFavorited = favorites.includes(currentJoke);

    if (isFavorited) {
        favorites = favorites.filter(joke => joke !== currentJoke);
        showToast("Removed from favorites!");
    } else {
        favorites.push(currentJoke);
        showToast("Added to favorites! ‚ù§Ô∏è");
    }
    localStorage.setItem('favorite_jokes', JSON.stringify(favorites));
    updateFavoriteStatus();
}

function updateFavoriteStatus() {
    const favorites = getFavorites();
    if (favorites.includes(currentJoke)) {
        favoriteBtn.classList.add('favorited');
    } else {
        favoriteBtn.classList.remove('favorited');
    }
}

function showFavorites() {
    favoritesView = true;
    const favorites = getFavorites();
    jokeDiv.classList.remove('fade-in');

    if (favorites.length === 0) {
        currentJoke = "You have no favorite jokes yet. Click the ‚ù§Ô∏è to save one!";
    } else {
        currentJoke = "Your Favorite Jokes:\n\n" + favorites.map((joke, index) => `${index + 1}. ${joke}`).join('\n\n---\n\n');
    }
    
    if (!card.classList.contains("flip")) {
        flipSound.play();
        card.classList.add("flip");
    }

    setTimeout(() => {
        jokeDiv.textContent = currentJoke;
        jokeDiv.classList.add('fade-in');
    }, 300);
    favoriteBtn.classList.remove('favorited');
}

showFavoritesBtn.addEventListener("click", showFavorites);

toggleBtn.addEventListener("click", () => {
  document.body.classList.toggle("dark");
  toggleBtn.textContent = document.body.classList.contains("dark") ? "‚òÄÔ∏è" : "üåô";
});
</script>

<!-- AD SCRIPT ADDED HERE -->
<script type='text/javascript' src='//pl27954922.effectivegatecpm.com/7f/ea/e2/7feae2c70f3e35488693fdcf3e69cb3f.js'></script>
<script type='text/javascript' src='//pl27965630.effectivegatecpm.com/38/5a/12/385a12a4446f0e5303b4001b43bac2fc.js'></script>
</body>
</html>
